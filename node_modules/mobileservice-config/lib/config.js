// ----------------------------------------------------------------------------
// Copyright (c) Microsoft Corporation. All rights reserved.
// ----------------------------------------------------------------------------

var keys = require('./keys.js'),
    standardKeys = keys.standardKeys,
    customAppSettingsKey = keys.customAppSettingsKey;

function Config(store) {
    addSettings(standardKeys, this, store, msNaming);

    this.appSettings = {};
    if(store[customAppSettingsKey]) {
        var customKeyNames = JSON.parse(store[customAppSettingsKey]);
        addSettings(customKeyNames, this.appSettings, store, customAppSettingNaming);
    }
}

var addSettings = function(keys, target, store, naming) {
    keys.forEach(function(keyname) {
        Object.defineProperty(target, naming(keyname), {
            value: store[keyname],
            enumerable: true,
            writable: false
        });
    });	
};

var customAppSettingNaming = function(keyname) {
    return keyname;
};

var msNaming = function(keyname) {
    return keyname.charAt(3).toLowerCase() + keyname.substr(4);
};

exports = module.exports = Config;